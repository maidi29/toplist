<div class="before-start">
  <div class="container">
    Share this ID with all players so they can join:
    <div class="share">
      <h2>{{roomId}}</h2>
      <app-share *ngIf="roomId" [gameId]="roomId"></app-share>
    </div>
  </div>
  <hr/>
  <form [formGroup]="questionModeForm" class="question-mode-form">
      <div class="radio-container">
        <input type="radio" id="default" name="questionMode" value="default"
               formControlName="questionMode" class="radio" [ngClass]="{
               'checked': questionModeForm.controls.questionMode.value === 'default'
               }" >
        <label for="default">Default: Play
          <input maxlength="2" type="number" step="1" formControlName="numberRuns" class="number-runs"/>
          full runs where every captain defines a topic per round and guesses the order of the answers.
          <div class="error">{{errorNumberRuns}}</div>
        </label>
      </div>
       <div class="radio-container">
        <input type="radio" id="predefined" name="questionMode" value="predefined"
               formControlName="questionMode" class="radio" [ngClass]="{
               'checked': questionModeForm.controls.questionMode.value === 'predefined'
               }" >
        <label for="predefined" class="predefined-label">
          <div>Create a pre-defined custom game where you set all topics now.
            The current captain guesses the order of the answers.</div>
          <div class="predefined-info">
            {{(allQuestions|| []).length}} topics defined
            <button class="secondary"
                    (click)="
                    questionModeForm.controls.questionMode.setValue('predefined');
                    openPredefinedModal = true;
                    errorQuestions = '';
            ">
              {{(allQuestions || []).length <= 0 ? 'Add' : 'Change'}}
            </button>
          </div>
          <div class="error">{{errorQuestions}}</div>
        </label>
      </div>
  </form>
  <hr/>
  <div class="container">
    <div>Has everyone joined?</div>
    <div *ngIf="(players?.length || 0) < 4">It's recommended to play with at least 4 players</div>
    <app-button (click)="startNewRound()" [autoWidth]="true">Start</app-button>
    <div>with {{players?.length}} players and
      <ng-container *ngIf="questionModeForm.controls.questionMode.value === 'default'">
        {{questionModeForm.controls.numberRuns.value}} runs (= {{getNumberRounds()}} rounds)
      </ng-container>
      <ng-container *ngIf="questionModeForm.controls.questionMode.value === 'predefined'">
        {{(allQuestions|| []).length}} topics
      </ng-container>
    </div>
  </div>
</div>
<app-modal *ngIf="openPredefinedModal">
 <app-predefine-questions [playersCount]="(players?.length ||0)+1" (close)="openPredefinedModal=false"></app-predefine-questions>
</app-modal>
